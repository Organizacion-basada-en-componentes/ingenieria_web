<div class="register-container">
  <h2>Regístrate</h2>
  <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
    <div class="form-group">
      <label for="username">Nombre de usuario</label>
      <input
        type="text"
        id="username"
        name="username"
        class="form-control"
        [(ngModel)]="username"
        required
        placeholder="Tu nombre de usuario"
      />
      <label for="name">Nombre</label>
      <input
        type="text"
        id="name"
        name="nombre"
        class="form-control"
        [(ngModel)]="nombre"
        required
        placeholder="Tu nombre"
      />
      <label for="dni">DNI</label>
      <input
        type="text"
        id="dni"
        name="dni"
        class="form-control"
        [(ngModel)]="dni"
        required
        placeholder="Tu DNI"
      />
    </div>

    <div class="form-group">
      <label for="email">Correo electrónico</label>
      <input
        type="email"
        id="email"
        name="email"
        class="form-control"
        [(ngModel)]="email"
        required
        placeholder="Tu correo electrónico"
      />
    </div>

    <div class="form-group">
      <label for="password">Contraseña</label>
      <input
        type="password"
        id="password"
        name="password"
        class="form-control"
        [(ngModel)]="password"
        required
        placeholder="Tu contraseña"
      />
    </div>

    <div class="form-group">
      <label for="role">Tipo de usuario</label>
      <select
        id="role"
        name="role"
        class="form-control"
        [(ngModel)]="role"
        required
        (change)="onRoleChange($event)"
      >
        <option value="PACIENTE">Paciente</option>
        <option value="MEDICO">Médico</option>
      </select>
    </div>

    <!-- Campo para la especialidad de médico (solo si el rol es 'MEDICO') -->
    <div *ngIf="role === 'MEDICO'" class="form-group">
      <label for="especialidad">Especialidad</label>
      <input
        type="text"
        id="especialidad"
        name="especialidad"
        class="form-control"
        [(ngModel)]="especialidad"
        placeholder="Tu especialidad"
        required
      />
  
      
    </div>

    <!-- Campo para la fecha de nacimiento de paciente (solo si el rol es 'PACIENTE') -->
    <div *ngIf="role === 'PACIENTE'" class="form-group">
      <label for="fechaNacimiento">Fecha de nacimiento</label>
      <input
        type="date"
        id="fechaNacimiento"
        name="fechaNacimiento"
        class="form-control"
        [(ngModel)]="fechaNacimiento"
        required
      />
    </div>

  
    <button
      type="submit"
      class="btn-register"
      [disabled]="!registerForm.valid"
    >
      Crear cuenta
    </button>
  </form>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <div *ngIf="debugInfo" class="alert alert-info">
    <strong>Información de depuración:</strong><br />
    {{ debugInfo }}
  </div>

  <p class="login-prompt">
    ¿Ya tienes una cuenta?
    <a routerLink="/login" class="login-link">Inicia sesión aquí</a>
  </p>
</div>
