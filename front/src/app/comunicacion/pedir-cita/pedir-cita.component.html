<div class="container pedir-cita-container">
  <h1 class="header">Pedir una cita como {{ usertype }}</h1>

  <!-- Formulario para pedir una cita -->
  <form [formGroup]="pedirCitaForm" (ngSubmit)="onSubmit()" class="form">
    <div class="form-group">
      <label for="fecha">Fecha:</label>
      <input
        id="fecha"
        type="date"
        class="form-control"
        formControlName="fecha"
        required
        [ngClass]="{ 'is-invalid': pedirCitaForm.get('fecha')?.invalid && pedirCitaForm.get('fecha')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="pedirCitaForm.get('fecha')?.invalid && pedirCitaForm.get('fecha')?.touched">
        Por favor, selecciona una fecha v치lida.
      </div>
    </div>

    <div class="form-group">
      <label for="hora">Hora:</label>
      <input
        id="hora"
        type="time"
        class="form-control"
        formControlName="hora"
        required
        [ngClass]="{ 'is-invalid': pedirCitaForm.get('hora')?.invalid && pedirCitaForm.get('hora')?.touched }"
      />
      <div class="invalid-feedback" *ngIf="pedirCitaForm.get('hora')?.invalid && pedirCitaForm.get('hora')?.touched">
        Por favor, selecciona una hora v치lida.
      </div>
    </div>

    <div class="form-group">
      <label for="motivo">Motivo:</label>
      <textarea
        id="motivo"
        class="form-control"
        formControlName="motivo"
        rows="3"
        required
        [ngClass]="{ 'is-invalid': pedirCitaForm.get('motivo')?.invalid && pedirCitaForm.get('motivo')?.touched }"
      ></textarea>
      <div class="invalid-feedback" *ngIf="pedirCitaForm.get('motivo')?.invalid && pedirCitaForm.get('motivo')?.touched">
        Por favor, proporciona un motivo v치lido.
      </div>
    </div>

    <button type="submit" class="btn btn-submit" [disabled]="pedirCitaForm.invalid">Pedir cita</button>
  </form>

  <hr class="divider" />

  <!-- Secci칩n para mostrar las citas existentes -->
  <h2 class="sub-header">Mis citas</h2>
  <ul *ngIf="!loading && citas.length > 0" class="citas-list">
    <li class="cita-item" *ngFor="let cita of citas">
      <div class="cita-card">
        <p><strong>Fecha y Hora:</strong> {{ cita.fechaHora | date: 'short' }}</p>
        <p><strong>Motivo:</strong> {{ cita.motivo }}</p>
      </div>
    </li>
  </ul>
  <div *ngIf="!loading && citas.length === 0" class="no-citas">
    No tienes citas registradas.
  </div>
</div>
